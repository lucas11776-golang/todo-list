{% extends "/components/layouts/standard.html" %}

{% macro Title %}Your Tasks Manager{% end %}

{% macro Navbar %}
    {{ render "/components/navbar.html" }}
{% end %}

{% macro Content %}
    <!-- Main App Container -->
    <div class="app-container">
        <div class="row">
            <div class="col-6 text-left">
                <h1 style="text-align: left;">My Tasks</h1>
            </div>
            <div class="col-6" style="text-align: right;">
                <a class="btn btn-primary" href="{{ url("todos", "create") }}">
                    <i class="fa fa-floppy-disk me-1"></i> Create
                </a>
            </div>

            {% if tasks %}
            <div class="col-12">
                <ul id="todo-list">
                    {% for task in tasks %}
                    <li class="todo-item {% if task.Complete %}completed{% end %}">
                        <div class="todo-content">
                            <h5>{{ task.Title }}</h5>
                            <p>{{ task.Description }}</p>
                        </div>
                        <div class="todo-actions">


                            {% if task.Complete %}
                            <form class="d-inline" method="post" action="{{ url("todos", task.ID, "complete") }}">
                                <input name="__METHOD__" value="DELETE" hidden>
                                <button class="btn btn-warning">
                                    <i class="fa-solid fa-ban"></i>
                                </button>
                            </form>
                            {% else %}
                            <form class="d-inline" method="post" action="{{ url("todos", task.ID, "complete") }}">
                                <button class="btn btn-success">
                                    <i class="fa-solid fa-check"></i>
                                </button>
                            </form>
                            {% end %}

                            <a class="btn btn-outline-primary" href="{{ url("todos", task.ID) }}">
                                <i class="fas fa-eye"></i>
                            </a>
                        </div>
                    </li>
                    {% end %}
                </ul>
            </div>
            {% end %}

        </div>
    </div>
{% end %}

{% macro Footer %}
    {{ render "/components/footer.html" }}
{% end %}